plugins {
  id "com.moowork.node" version "1.1.1"
  id "de.richsource.gradle.plugins.typescript" version "1.8.0"
}

import com.moowork.gradle.node.NodeExtension
import com.moowork.gradle.node.variant.VariantBuilder

node {
  version = "7.4.0"
  npmVersion = "4.0.5"
  download = true
}

String nodeExecutable() {
  NodeExtension nodeExt = NodeExtension.get(project)
  return new VariantBuilder(nodeExt).build().nodeExec
}

task ngServe(type: NodeTask) {
  script = file('node_modules/angular-cli/bin/ng')
  args = ['serve', '--host', '0.0.0.0', '--port', '4300']
  dependsOn npmInstall
}
